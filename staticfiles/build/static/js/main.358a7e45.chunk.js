(this["webpackJsonpread-rave"]=this["webpackJsonpread-rave"]||[]).push([[0],{104:function(e,t,n){},13:function(e,t,n){e.exports={Button:"Button_Button__27i9m",Wide:"Button_Wide__2ScDr",Bright:"Button_Bright__1MBHR"}},134:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(36),s=n.n(r),i=(n(104),n(15)),o=n.n(i),l=n(9),u=n(11),j=n(144),d=n(18),b=n(143),p=n.p+"static/media/rr-logo.72c1665d.png",O=n(27),v=n.n(O),x=n(14),h=n(12),m=n(24),f=n.n(m);f.a.defaults.baseURL="/api",f.a.defaults.headers.post["Content-Type"]="multipart/form-data",f.a.defaults.withCredentials=!0;var g=f.a.create(),w=f.a.create(),A=n(19),C=n(70),_=n(5),k=n(92),B=function(){var e=Object(u.a)(Object(l.a)().mark((function e(t,n){var a,c;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.get(t.next);case 3:a=e.sent,c=a.data,n((function(e){return Object(_.a)(Object(_.a)({},e),{},{next:c.next,results:c.results.reduce((function(e,t){return e.some((function(e){return e.id===t.id}))?e:[].concat(Object(C.a)(e),[t])}),e.results)})})),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),N=function(e,t,n){return e.id===t.id?Object(_.a)(Object(_.a)({},e),{},{followers_count:e.followers_count+1,following_id:n}):e.is_owner?Object(_.a)(Object(_.a)({},e),{},{following_count:e.following_count+1}):e},y=function(e,t){return e.id===t.id?Object(_.a)(Object(_.a)({},e),{},{followers_count:e.followers_count-1,following_id:null}):e.is_owner?Object(_.a)(Object(_.a)({},e),{},{following_count:e.following_count-1}):e},S=function(e){var t=Object(k.a)(null===e||void 0===e?void 0:e.refresh_token).exp;localStorage.setItem("refreshTokenTimestamp",t)},F=function(){localStorage.removeItem("refreshTokenTimestamp")},I=n(0),R=Object(a.createContext)(),E=Object(a.createContext)(),L=function(){return Object(a.useContext)(R)},P=function(){return Object(a.useContext)(E)},T=function(e){var t=e.children,n=Object(a.useState)(null),c=Object(h.a)(n,2),r=c[0],s=c[1],i=Object(A.f)(),o=function(){var e=Object(u.a)(Object(l.a)().mark((function e(){var t,n;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.get("dj-rest-auth/user/");case 3:t=e.sent,n=t.data,s(n),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){o()}),[]),Object(a.useMemo)((function(){g.interceptors.request.use(function(){var e=Object(u.a)(Object(l.a)().mark((function e(t){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("refreshTokenTimestamp")){e.next=11;break}return e.prev=1,e.next=4,f.a.post("/dj-rest-auth/token/refresh/");case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),s((function(e){return e&&i.push("/signin"),null})),F(),e.abrupt("return",t);case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),(function(e){return Promise.reject(e)})),w.interceptors.response.use((function(e){return e}),function(){var e=Object(u.a)(Object(l.a)().mark((function e(t){var n;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(401!==(null===(n=t.response)||void 0===n?void 0:n.status)){e.next=11;break}return e.prev=1,e.next=4,f.a.post("/dj-rest-auth/token/refresh/");case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),s((function(e){return e&&i.push("/signin"),null})),F();case 10:return e.abrupt("return",f()(t.config));case 11:return e.abrupt("return",Promise.reject(t));case 12:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}())}),[i]),Object(I.jsx)(R.Provider,{value:r,children:Object(I.jsx)(E.Provider,{value:s,children:t})})},G=n(95),X=n.n(G),z=function(e){var t=e.src,n=e.height,a=void 0===n?45:n,c=e.text;return Object(I.jsxs)("span",{children:[Object(I.jsx)("img",{className:X.a.Avatar,src:t,height:a,width:a,alt:"avatar"}),c]})},Q=function(){var e=Object(a.useState)(!1),t=Object(h.a)(e,2),n=t[0],c=t[1],r=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e=function(e){r.current&&!r.current.contains(e.target)&&c(!1)};return document.addEventListener("mouseup",e),function(){document.removeEventListener("mouseup",e)}}),[r]),{expanded:n,setExpanded:c,ref:r}},H=function(){var e=L(),t=P(),n=Q(),a=n.expanded,c=n.setExpanded,r=n.ref,s=function(){var e=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.post("dj-rest-auth/logout/");case 3:t(null),F(),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),i=Object(I.jsxs)(x.c,{className:v.a.NavLink,activeClassName:v.a.Active,to:"/reviews/create",children:[Object(I.jsx)("i",{className:"far fa-plus-square"}),"Add post"]}),o=Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)(x.c,{className:v.a.NavLink,activeClassName:v.a.Active,to:"/feed",children:[Object(I.jsx)("i",{className:"fas fa-stream"}),"Feed"]}),Object(I.jsxs)(x.c,{className:v.a.NavLink,activeClassName:v.a.Active,to:"/liked",children:[Object(I.jsx)("i",{className:"fas fa-heart"}),"Liked"]}),Object(I.jsxs)(x.c,{className:v.a.NavLink,to:"/",onClick:s,children:[Object(I.jsx)("i",{className:"fas fa-sign-out-alt"}),"Sign out"]}),Object(I.jsx)(x.c,{className:v.a.NavLink,to:"/profiles/".concat(null===e||void 0===e?void 0:e.profile_id),children:Object(I.jsx)(z,{src:null===e||void 0===e?void 0:e.profile_image,text:null===e||void 0===e?void 0:e.username,height:40})})]}),O=Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)(x.c,{className:v.a.NavLink,activeClassName:v.a.Active,to:"/signin",children:[Object(I.jsx)("i",{className:"fas fa-sign-in-alt"}),"Sign in"]}),Object(I.jsxs)(x.c,{to:"/signup",className:v.a.NavLink,activeClassName:v.a.Active,children:[Object(I.jsx)("i",{className:"fas fa-user-plus"}),"Sign up"]})]});return Object(I.jsx)(j.a,{expanded:a,className:v.a.NavBar,expand:"md",fixed:"top",children:Object(I.jsxs)(d.a,{children:[Object(I.jsx)(x.c,{to:"/",children:Object(I.jsx)(j.a.Brand,{children:Object(I.jsx)("img",{src:p,alt:"logo",height:"60"})})}),e&&i,Object(I.jsx)(j.a.Toggle,{ref:r,onClick:function(){return c(!a)},"aria-controls":"basic-navbar-nav"}),Object(I.jsx)(j.a.Collapse,{id:"basic-navbar-nav",children:Object(I.jsxs)(b.a,{className:"ml-auto text-left",children:[Object(I.jsxs)(x.c,{exact:!0,to:"/",className:v.a.NavLink,activeClassName:v.a.Active,children:[Object(I.jsx)("i",{className:"fas fa-home"})," Home"]}),e?o:O]})})]})})},U=n(29),W=n(28),Y=n.n(W),J=n(13),V=n.n(J),q=n(20),K=n(16),Z=n(6),D=n(21),M=n(22),$=function(e){var t=Object(A.f)();Object(a.useEffect)((function(){var n=function(){var n=Object(u.a)(Object(l.a)().mark((function n(){return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,f.a.post("/dj-rest-auth/token/refresh/");case 3:"loggedIn"===e&&t.push("/"),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),"loggedOut"===e&&t.push("/");case 9:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(){return n.apply(this,arguments)}}();n()}),[t,e])},ee=function(){var e,t,n,c;$("loggedIn");var r=Object(a.useState)({username:"",password1:"",password2:""}),s=Object(h.a)(r,2),i=s[0],j=s[1],b=i.username,p=i.password1,O=i.password2,v=Object(a.useState)({}),m=Object(h.a)(v,2),g=m[0],w=m[1],C=Object(A.f)(),k=function(e){j(Object(_.a)(Object(_.a)({},i),{},Object(U.a)({},e.target.name,e.target.value)))},B=function(){var e=Object(u.a)(Object(l.a)().mark((function e(t){var n;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,f.a.post("/dj-rest-auth/registration/",i);case 4:C.push("/signin"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),w(null===(n=e.t0.response)||void 0===n?void 0:n.data);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(I.jsx)(q.a,{className:"".concat(Y.a.Row," ").concat(Y.a.Background),children:Object(I.jsxs)(K.a,{className:"my-auto py-2 p-md-2 mx-auto",sm:12,md:6,lg:4,children:[Object(I.jsxs)(d.a,{className:"".concat(o.a.Content," p-4 "),children:[Object(I.jsx)("h1",{className:Y.a.Header,children:"sign up"}),Object(I.jsxs)(Z.a,{onSubmit:B,children:[Object(I.jsxs)(Z.a.Group,{controlId:"username",children:[Object(I.jsx)(Z.a.Label,{className:"d-none",children:"username"}),Object(I.jsx)(Z.a.Control,{className:Y.a.Input,type:"text",placeholder:"Username",name:"username",value:b,onChange:k})]}),null===(e=g.username)||void 0===e?void 0:e.map((function(e,t){return Object(I.jsx)(D.a,{variant:"warning",children:e},t)})),Object(I.jsxs)(Z.a.Group,{controlId:"password1",children:[Object(I.jsx)(Z.a.Label,{className:"d-none",children:"Password"}),Object(I.jsx)(Z.a.Control,{className:Y.a.Input,type:"password",placeholder:"Password",name:"password1",value:p,onChange:k})]}),null===(t=g.password1)||void 0===t?void 0:t.map((function(e,t){return Object(I.jsx)(D.a,{variant:"warning",children:e},t)})),Object(I.jsxs)(Z.a.Group,{controlId:"password2",children:[Object(I.jsx)(Z.a.Label,{className:"d-none",children:"Confirm password"}),Object(I.jsx)(Z.a.Control,{className:Y.a.Input,type:"password",placeholder:"Confirm password",name:"password2",value:O,onChange:k})]}),null===(n=g.password2)||void 0===n?void 0:n.map((function(e,t){return Object(I.jsx)(D.a,{variant:"warning",children:e},t)})),Object(I.jsx)(M.a,{variant:"dark",className:"".concat(V.a.Button," ").concat(V.a.Wide," ").concat(V.a.Bright),type:"submit",children:"Sign up"}),null===(c=g.non_field_errors)||void 0===c?void 0:c.map((function(e,t){return Object(I.jsx)(D.a,{variant:"warning",className:"mt-3",children:e},t)}))]})]}),Object(I.jsx)(d.a,{className:"mt-3 ".concat(o.a.Content),children:Object(I.jsxs)(x.b,{className:Y.a.Link,to:"/signin",children:["Already have an account? ",Object(I.jsx)("span",{children:"Sign in"})]})})]})})};var te=function(){var e,t,n,c=P();$("loggedIn");var r=Object(a.useState)({username:"",password:""}),s=Object(h.a)(r,2),i=s[0],j=s[1],b=i.username,p=i.password,O=Object(a.useState)({}),v=Object(h.a)(O,2),m=v[0],g=v[1],w=Object(A.f)(),C=function(){var e=Object(u.a)(Object(l.a)().mark((function e(t){var n,a,r;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,f.a.post("/dj-rest-auth/login/",i);case 4:n=e.sent,a=n.data,c(a.user),S(a),w.goBack(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),g(null===(r=e.t0.response)||void 0===r?void 0:r.data);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),k=function(e){j(Object(_.a)(Object(_.a)({},i),{},Object(U.a)({},e.target.name,e.target.value)))};return Object(I.jsx)(q.a,{className:"".concat(Y.a.Row," ").concat(Y.a.Background),children:Object(I.jsxs)(K.a,{className:"my-auto py-2 p-md-2 mx-auto",sm:12,md:6,lg:4,children:[Object(I.jsxs)(d.a,{className:"".concat(o.a.Content," p-4 "),children:[Object(I.jsx)("h1",{className:Y.a.Header,children:"Sign In"}),Object(I.jsxs)(Z.a,{onSubmit:C,children:[Object(I.jsxs)(Z.a.Group,{controlId:"username",children:[Object(I.jsx)(Z.a.Label,{className:"d-none",children:"username"}),Object(I.jsx)(Z.a.Control,{className:Y.a.Input,type:"text",placeholder:"Username",name:"username",value:b,onChange:k})]}),null===(e=m.username)||void 0===e?void 0:e.map((function(e,t){return Object(I.jsx)(D.a,{variant:"warning",children:e},t)})),Object(I.jsxs)(Z.a.Group,{controlId:"password",children:[Object(I.jsx)(Z.a.Label,{className:"d-none",children:"Password"}),Object(I.jsx)(Z.a.Control,{className:Y.a.Input,type:"password",placeholder:"Password",name:"password",value:p,onChange:k})]}),null===(t=m.password)||void 0===t?void 0:t.map((function(e,t){return Object(I.jsx)(D.a,{variant:"warning",children:e},t)})),Object(I.jsx)(M.a,{variant:"dark",className:"".concat(V.a.Button," ").concat(V.a.Wide," ").concat(V.a.Bright),type:"submit",children:"Sign In"}),null===(n=m.non_field_errors)||void 0===n?void 0:n.map((function(e,t){return Object(I.jsx)(D.a,{variant:"warning",className:"mt-3",children:e},t)}))]})]}),Object(I.jsx)(d.a,{className:"mt-3 ".concat(o.a.Content),children:Object(I.jsxs)(x.b,{className:Y.a.Link,to:"/signup",children:["Don't have an account yet? ",Object(I.jsx)("span",{children:"Sign Up"})]})})]})})},ne=n(65),ae=n.n(ne),ce=n(66),re=n(139),se=n(97),ie=n.n(se),oe=function(e){var t=e.spinner,n=e.src,a=e.message;return Object(I.jsxs)("div",{className:"".concat(ie.a.Asset," p-4"),children:[t&&Object(I.jsx)(re.a,{animation:"border"}),n&&Object(I.jsx)("img",{src:n,alt:a}),a&&Object(I.jsx)("p",{className:"mt-4",children:a})]})};var le=function(){var e,t,n,c,r,s,i;$("loggedOut");var j=Object(a.useState)({}),b=Object(h.a)(j,2),p=b[0],O=b[1],v=Object(a.useState)({book_title:"",book_author:"",caption:"",book_category:"",rating:"",review_body:"",image:""}),x=Object(h.a)(v,2),m=x[0],f=x[1],w=m.book_title,C=m.book_author,k=m.caption,B=m.book_category,N=m.rating,y=m.review_body,S=m.image,F=Object(a.useRef)(null),R=Object(A.f)(),E=function(e){f(Object(_.a)(Object(_.a)({},m),{},Object(U.a)({},e.target.name,e.target.value)))},L=function(){var e=Object(u.a)(Object(l.a)().mark((function e(t){var n,a,c,r,s;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(n=new FormData).append("book_title",w),n.append("book_author",C),n.append("caption",k),n.append("book_category",B),n.append("rating",N),n.append("review_body",y),n.append("image",F.current.files[0]),e.prev=9,e.next=12,g.post("/reviews/",n);case 12:a=e.sent,c=a.data,R.push("/reviews/".concat(c.id)),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(9),401!==(null===(r=e.t0.response)||void 0===r?void 0:r.status)&&O(null===(s=e.t0.response)||void 0===s?void 0:s.data);case 20:case"end":return e.stop()}}),e,null,[[9,17]])})));return function(t){return e.apply(this,arguments)}}(),P=Object(I.jsxs)("div",{className:"text-center",children:[Object(I.jsxs)(Z.a.Group,{children:[Object(I.jsx)(Z.a.Label,{children:"Book Title"}),Object(I.jsx)(Z.a.Control,{type:"text",name:"book_title",value:w,onChange:E})]}),null===p||void 0===p||null===(e=p.book_title)||void 0===e?void 0:e.map((function(e,t){return Object(I.jsx)(D.a,{variant:"warning",children:e},t)})),Object(I.jsxs)(Z.a.Group,{children:[Object(I.jsx)(Z.a.Label,{children:"Book Author"}),Object(I.jsx)(Z.a.Control,{type:"text",name:"book_author",value:C,onChange:E})]}),null===p||void 0===p||null===(t=p.book_author)||void 0===t?void 0:t.map((function(e,t){return Object(I.jsx)(D.a,{variant:"warning",children:e},t)})),Object(I.jsxs)(Z.a.Group,{children:[Object(I.jsx)(Z.a.Label,{children:"Caption"}),Object(I.jsx)(Z.a.Control,{as:"textarea",rows:2,name:"caption",value:k,onChange:E})]}),null===p||void 0===p||null===(n=p.caption)||void 0===n?void 0:n.map((function(e,t){return Object(I.jsx)(D.a,{variant:"warning",children:e},t)})),Object(I.jsxs)(Z.a.Group,{children:[Object(I.jsx)(Z.a.Label,{children:"Book Category"}),Object(I.jsxs)(Z.a.Control,{as:"select",name:"book_category",value:B,onChange:E,children:[Object(I.jsx)("option",{value:"nonfiction",children:"Non-Fiction"}),Object(I.jsx)("option",{value:"fiction",children:"Fiction"}),Object(I.jsx)("option",{value:"historicalfiction",children:"Historical Fiction"}),Object(I.jsx)("option",{value:"romancenovel",children:"Romance Novel"}),Object(I.jsx)("option",{value:"horror",children:"Horror"}),Object(I.jsx)("option",{value:"sciencefiction",children:"Science Fiction"}),Object(I.jsx)("option",{value:"biography",children:"Biography"}),Object(I.jsx)("option",{value:"memoir",children:"Memoir"}),Object(I.jsx)("option",{value:"fantasy",children:"Fantasy"}),Object(I.jsx)("option",{value:"thriller",children:"Thriller"}),Object(I.jsx)("option",{value:"childrensliterature",children:"Children's Literature"}),Object(I.jsx)("option",{value:"humor",children:"Humor"}),Object(I.jsx)("option",{value:"selfhelp",children:"Self-help"}),Object(I.jsx)("option",{value:"yougadultfiction",children:"Young Adult Fiction"}),Object(I.jsx)("option",{value:"picturebook",children:"Picture Book"}),Object(I.jsx)("option",{value:"other",children:"Other"})]})]}),null===p||void 0===p||null===(c=p.book_category)||void 0===c?void 0:c.map((function(e,t){return Object(I.jsx)(D.a,{variant:"warning",children:e},t)})),Object(I.jsxs)(Z.a.Group,{children:[Object(I.jsx)(Z.a.Label,{children:"Rating"}),Object(I.jsxs)(Z.a.Control,{as:"select",name:"rating",value:N,onChange:E,children:[Object(I.jsx)("option",{value:"1",children:"1"}),Object(I.jsx)("option",{value:"2",children:"2"}),Object(I.jsx)("option",{value:"3",children:"3"}),Object(I.jsx)("option",{value:"4",children:"4"}),Object(I.jsx)("option",{value:"5",children:"5"})]})]}),null===p||void 0===p||null===(r=p.rating)||void 0===r?void 0:r.map((function(e,t){return Object(I.jsx)(D.a,{variant:"warning",children:e},t)})),Object(I.jsxs)(Z.a.Group,{children:[Object(I.jsx)(Z.a.Label,{children:"review_body"}),Object(I.jsx)(Z.a.Control,{as:"textarea",rows:10,name:"review_body",value:y,onChange:E})]}),null===p||void 0===p||null===(s=p.review_body)||void 0===s?void 0:s.map((function(e,t){return Object(I.jsx)(D.a,{variant:"warning",children:e},t)})),Object(I.jsx)(M.a,{className:"".concat(V.a.Button," ").concat(V.a.Bright),onClick:function(){},children:"cancel"}),Object(I.jsx)(M.a,{className:"".concat(V.a.Button," ").concat(V.a.Bright),type:"submit",children:"create"})]});return Object(I.jsx)(Z.a,{onSubmit:L,children:Object(I.jsxs)(q.a,{children:[Object(I.jsx)(K.a,{className:"py-2 p-0 p-md-2",md:7,lg:8,children:Object(I.jsxs)(d.a,{className:"".concat(o.a.Content," ").concat(ae.a.Container," d-flex flex-column justify-content-center"),children:[Object(I.jsxs)(Z.a.Group,{className:"text-center",children:[S?Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("figure",{children:Object(I.jsx)(ce.a,{className:o.a.Image,src:S,rounded:!0})}),Object(I.jsx)("div",{children:Object(I.jsx)(Z.a.Label,{className:"".concat(V.a.Button," ").concat(V.a.Bright," btn"),htmlFor:"image-upload",children:"Change the image"})})]}):Object(I.jsx)(Z.a.Label,{className:"d-flex justify-content-center",htmlFor:"image-upload",children:Object(I.jsx)(oe,{src:"data:image/png;base64,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+5rATpGw0gtxHRGdFewnPvGJOumfCGzcW9umwHa2AjLCGj+8incICGu7iesImTFjRrnsssvKxz72sTrpnwceeKAJ7OOPP14nw6sT1ptvvrlO+meQXkpOLnEdMRHYeDFzVmBji2CYAxthjYcwMsJ68MEHC+sIEdcR1AlsxtNAwxzYTlhvueWWOukfYR094jqiIrDf+MY30gI7bFsEEdZPfvKTKWGNT3WIPdYILKNDXEdYJ7BnnHFGnfTP/fff39wH+4c//KFOBtfzzz/f/CXz7W9/u076J8IaK9b4+BxGi7iOuMzA3nfffeU973lP+eMf/1gngyfCGvvPt912W530j7CONnGljI+PN4E9/fTT66R/7r333maLYBADmx3W2AoQ1tElrjQisPHheKeddlqd9M8gBrazFZAR1vihVYQ1brtidIkr/ycCG29m+shHPlIn/TNIgX3uueeasK5evbpO+ifCGlsBwoq48h922WWXsnLlyvLhD3+4TvonAht7sH/605/q5MUXYY2tgIywHnbYYeWnP/2psNIQV/6fCOyVV16ZEthf//rXzQp2OgKbHdZYsR544IF1wqgTV7arE9gPfehDddI/0xHYzK2ATlhf+cpX1gmIKzsRgb3qqqvSAvu+972vPPnkk3WSZ/PmzWXhwoXle9/7Xp30z+GHHy6sbJe4slOdwH7wgx+sk/655557mj3YzMB2wvrDH/6wTvpHWNkZceV/isBeffXVaYGNJ7kyAtsJa3yESr91wuqjWdgRcWVSOivYU089tU76Z+PGjU1gn3rqqTrpnbAy3cSVSdt1113LddddlxbY2CLoR2AjrPEwREZYX//61wsrkzI2MTGxtR7DpHSebsr4yfvcuXPLhg0b6ll3TjrppOYJqX57wxve0OzdvuIVr6gT2DFxpSuZgR1EEdZYCe+33351AjtnW4CuxBbBqlWryimnnFIn7SWsdENc6VpnD7bNgRVWuiWu9GTmzJlNYBcsWFAn7XHEEUcIK10TV3oWgY0tgridqi2ElV6JK30Rgb3++uub26mGXSesL3/5y+sEpk5c6ZtZs2aVG264oXkpy7B605ve1NzGJaz0SlzpqwjsjTfeOJSBnTNnTnMf68te9rI6ge6JK33XCezJJ59cJ4MvwvqDH/xAWOkbcSVFBPamm24aisAKKxnElTSdFWw8jjqobAWQZSTi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",message:"Click or tap to upload an image"})}),Object(I.jsx)(Z.a.File,{id:"image-upload",accept:"image/*",onChange:function(e){e.target.files.length&&(URL.revokeObjectURL(S),f(Object(_.a)(Object(_.a)({},m),{},{image:URL.createObjectURL(e.target.files[0])})))},ref:F})]}),null===p||void 0===p||null===(i=p.image)||void 0===i?void 0:i.map((function(e,t){return Object(I.jsx)(D.a,{variant:"warning",children:e},t)})),Object(I.jsx)("div",{className:"d-md-none",children:P})]})}),Object(I.jsx)(K.a,{md:5,lg:4,className:"d-none d-md-block p-0 p-md-2",children:Object(I.jsx)(d.a,{className:o.a.Content,children:P})})]})})},ue=n(25),je=n.n(ue),de=n(145),be=n(140),pe=n(142),Oe=n(141),ve=n(34),xe=n(74),he=n.n(xe),me=c.a.forwardRef((function(e,t){var n=e.onClick;return Object(I.jsx)("i",{className:"fas fa-ellipsis-v",ref:t,onClick:function(e){e.preventDefault(),n(e)}})})),fe=function(e){var t=e.handleEdit,n=e.handleDelete;return Object(I.jsxs)(ve.a,{className:"ml-auto",drop:"left",children:[Object(I.jsx)(ve.a.Toggle,{as:me}),Object(I.jsxs)(ve.a.Menu,{className:"text-center",popperConfig:{strategy:"fixed"},children:[Object(I.jsx)(ve.a.Item,{className:he.a.DropdownItem,onClick:t,"aria-label":"edit",children:Object(I.jsx)("i",{className:"fas fa-edit"})}),Object(I.jsx)(ve.a.Item,{className:he.a.DropdownItem,onClick:n,"aria-label":"delete",children:Object(I.jsx)("i",{className:"fas fa-trash-alt"})})]})]})};function ge(e){var t=e.id,n=Object(A.f)();return Object(I.jsxs)(ve.a,{className:"ml-auto px-3 ".concat(he.a.Absolute),drop:"left",children:[Object(I.jsx)(ve.a.Toggle,{as:me}),Object(I.jsxs)(ve.a.Menu,{children:[Object(I.jsxs)(ve.a.Item,{onClick:function(){return n.push("/profiles/".concat(t,"/edit"))},"aria-label":"edit-profile",children:[Object(I.jsx)("i",{className:"fas fa-edit"})," edit profile"]}),Object(I.jsxs)(ve.a.Item,{onClick:function(){return n.push("/profiles/".concat(t,"/edit/username"))},"aria-label":"edit-username",children:[Object(I.jsx)("i",{className:"far fa-id-card"}),"change username"]}),Object(I.jsxs)(ve.a.Item,{onClick:function(){return n.push("/profiles/".concat(t,"/edit/password"))},"aria-label":"edit-password",children:[Object(I.jsx)("i",{className:"fas fa-key"}),"change password"]})]})]})}var we=function(e){var t=e.id,n=e.owner,a=e.profile_id,c=e.profile_image,r=e.book_title,s=e.book_author,i=e.caption,j=e.book_category,d=e.rating,b=e.review_body,p=e.image,O=e.updated_at,v=e.reviewPage,h=e.setReviews,m=e.likes_count,f=e.like_id,g=e.comments_count,C=e.human_readable_category,k=L(),B=(null===k||void 0===k?void 0:k.username)===n,N=Object(A.f)(),y=function(){var e=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.delete("/reviews/".concat(t,"/"));case 3:N.goBack(),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(u.a)(Object(l.a)().mark((function e(){var n,a;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.post("/likes/",{review:t});case 3:n=e.sent,a=n.data,h((function(e){return Object(_.a)(Object(_.a)({},e),{},{results:e.results.map((function(e){return e.id===t?Object(_.a)(Object(_.a)({},e),{},{likes_count:e.likes_count+1,like_id:a.id}):e}))})})),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.delete("/likes/".concat(f,"/"));case 3:h((function(e){return Object(_.a)(Object(_.a)({},e),{},{results:e.results.map((function(e){return e.id===t?Object(_.a)(Object(_.a)({},e),{},{likes_count:e.likes_count-1,like_id:null}):e}))})})),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(I.jsxs)(de.a,{className:je.a.Review,children:[Object(I.jsx)(q.a,{className:je.a.ReviewRow,children:Object(I.jsx)(de.a.Body,{children:Object(I.jsxs)(be.a,{className:"align-items-center justify-content-between",children:[Object(I.jsxs)(x.b,{to:"/profiles/".concat(a),className:"font-weight-bold text-dark",children:[Object(I.jsx)(z,{src:c,height:55}),n]}),Object(I.jsxs)("div",{className:"d-flex align-items-center",children:[Object(I.jsx)("span",{className:"pr-4",children:O}),B&&v&&Object(I.jsx)(fe,{handleEdit:function(){N.push("/reviews/".concat(t,"/edit"))},handleDelete:y})]})]})})}),Object(I.jsxs)(q.a,{className:je.a.ReviewRow,children:[Object(I.jsx)(K.a,{className:je.a.HideOnSmallScreen,children:Object(I.jsx)(x.b,{to:"/reviews/".concat(t),children:Object(I.jsx)(de.a.Img,{src:p,alt:r})})}),Object(I.jsxs)(K.a,{className:"text-muted ".concat(je.a.ReviewBackground),children:[Object(I.jsx)(x.b,{to:"/reviews/".concat(t),className:je.a.HideOnLargeScreen,children:Object(I.jsx)(de.a.Img,{src:p,alt:r,className:je.a.ImageSmallScreen})}),Object(I.jsxs)(de.a.Body,{className:je.a.ReviewSummary,children:[r&&Object(I.jsxs)(de.a.Title,{className:je.a.ReviewTitle,children:[" ",r]}),Object(I.jsxs)("div",{className:"mx-auto",children:[s&&Object(I.jsxs)(de.a.Text,{children:[Object(I.jsx)("strong",{children:"Author: "}),s]}),j&&Object(I.jsxs)(de.a.Text,{children:[Object(I.jsx)("strong",{children:"Category: "}),C]}),i&&Object(I.jsxs)(de.a.Text,{className:"px-3, ".concat(je.a.ReviewCaption),children:['" ',i,' "']}),d&&Object(I.jsxs)(de.a.Text,{children:[d,"/5",Object(I.jsx)("i",{className:"fa-solid fa-star ".concat(je.a.Star)})]})]}),Object(I.jsxs)("div",{className:"text-right pb-3 pr-3 ".concat(je.a.ReviewBar),children:[B?Object(I.jsx)(pe.a,{placement:"top",overlay:Object(I.jsx)(Oe.a,{children:"You can't like your own review!"}),children:Object(I.jsx)("i",{className:"far fa-heart"})}):f?Object(I.jsx)("span",{onClick:F,children:Object(I.jsx)("i",{className:"fas fa-heart ".concat(je.a.Heart)})}):k?Object(I.jsx)("span",{onClick:S,children:Object(I.jsx)("i",{className:"far fa-heart ".concat(je.a.HeartOutline)})}):Object(I.jsx)(pe.a,{placement:"top",overlay:Object(I.jsx)(Oe.a,{children:"Log in to like reviews!"}),children:Object(I.jsx)("i",{className:"far fa-heart"})}),m,Object(I.jsx)(x.b,{to:"/reviews/".concat(t),children:Object(I.jsx)("i",{className:"far fa-comments"})}),g]})]})]})]}),v&&Object(I.jsx)(q.a,{className:je.a.ReviewRow,children:Object(I.jsxs)(de.a.Body,{className:je.a.ReviewBody,children:[Object(I.jsx)(de.a.Title,{className:"font-weight-bold pb-2",children:"Review:"}),b&&Object(I.jsx)(de.a.Text,{className:o.a.BodyFont,children:b})]})})]})},Ae=n(49),Ce=n.n(Ae);var _e=function(e){var t=e.id,n=e.content,c=e.setShowEditForm,r=e.setComments,s=Object(a.useState)(n),i=Object(h.a)(s,2),o=i[0],j=i[1],d=function(){var e=Object(u.a)(Object(l.a)().mark((function e(n){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,w.put("/comments/".concat(t,"/"),{content:o.trim()});case 4:r((function(e){return Object(_.a)(Object(_.a)({},e),{},{results:e.results.map((function(e){return e.id===t?Object(_.a)(Object(_.a)({},e),{},{content:o.trim(),updated_at:"now"}):e}))})})),c(!1),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(I.jsxs)(Z.a,{onSubmit:d,children:[Object(I.jsx)(Z.a.Group,{className:"pr-1",children:Object(I.jsx)(Z.a.Control,{className:Ce.a.Form,as:"textarea",value:o,onChange:function(e){j(e.target.value)},rows:2})}),Object(I.jsxs)("div",{className:"text-right",children:[Object(I.jsx)("button",{className:Ce.a.Button,onClick:function(){return c(!1)},type:"button",children:"cancel"}),Object(I.jsx)("button",{className:Ce.a.Button,disabled:!n.trim(),type:"submit",children:"save"})]})]})},ke=n(81),Be=n.n(ke),Ne=function(e){var t=e.profile_id,n=e.profile_image,c=e.owner,r=e.updated_at,s=e.content,i=e.id,o=e.setReview,j=e.setComments,d=L(),b=(null===d||void 0===d?void 0:d.username)===c,p=Object(a.useState)(!1),O=Object(h.a)(p,2),v=O[0],m=O[1],f=function(){var e=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.delete("/comments/".concat(i,"/"));case 3:o((function(e){return{results:[Object(_.a)(Object(_.a)({},e.results[0]),{},{comments_count:e.results[0].comments_count-1})]}})),j((function(e){return Object(_.a)(Object(_.a)({},e),{},{results:e.results.filter((function(e){return e.id!==i}))})})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("hr",{}),Object(I.jsxs)(be.a,{children:[Object(I.jsx)(x.b,{to:"/profiles/".concat(t),children:Object(I.jsx)(z,{src:n})}),Object(I.jsxs)(be.a.Body,{className:"align-self-center ml-2",children:[Object(I.jsx)("span",{className:Be.a.Owner,children:c}),Object(I.jsx)("span",{className:Be.a.Date,children:r}),v?Object(I.jsx)(_e,{id:i,profile_id:t,content:s,profileImage:n,setComments:j,setShowEditForm:m}):Object(I.jsx)("p",{children:s})]}),b&&!v&&Object(I.jsx)(fe,{handleEdit:function(){return m(!0)},handleDelete:f})]})]})},ye=n(98);var Se=function(e){var t=e.review,n=e.setReview,c=e.setComments,r=e.profileImage,s=e.profile_id,i=Object(a.useState)(""),o=Object(h.a)(i,2),j=o[0],d=o[1],b=function(){var e=Object(u.a)(Object(l.a)().mark((function e(a){var r,s;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,w.post("/comments/",{content:j,review:t});case 4:r=e.sent,s=r.data,c((function(e){return Object(_.a)(Object(_.a)({},e),{},{results:[s].concat(Object(C.a)(e.results))})})),n((function(e){return{results:[Object(_.a)(Object(_.a)({},e.results[0]),{},{comments_count:e.results[0].comments_count+1})]}})),d(""),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(1);case 13:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(I.jsxs)(Z.a,{className:"mt-2",onSubmit:b,children:[Object(I.jsx)(Z.a.Group,{children:Object(I.jsxs)(ye.a,{children:[Object(I.jsx)(x.b,{to:"/profiles/".concat(s),children:Object(I.jsx)(z,{src:r})}),Object(I.jsx)(Z.a.Control,{className:Ce.a.Form,placeholder:"My thoughts...",as:"textarea",value:j,onChange:function(e){d(e.target.value)},rows:2})]})}),Object(I.jsx)("button",{className:"".concat(Ce.a.Button," btn d-block ml-auto"),disabled:!j.trim(),type:"submit",children:"Comment"})]})},Fe=n(53),Ie=Object(a.createContext)(),Re=Object(a.createContext)(),Ee=function(){return Object(a.useContext)(Ie)},Le=function(){return Object(a.useContext)(Re)},Pe=function(e){var t=e.children,n=Object(a.useState)({pageProfile:{results:[]},popularProfiles:{results:[]}}),c=Object(h.a)(n,2),r=c[0],s=c[1],i=L(),o=function(){var e=Object(u.a)(Object(l.a)().mark((function e(t){var n,a;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.post("/followers/",{followed:t.id});case 3:n=e.sent,a=n.data,s((function(e){return Object(_.a)(Object(_.a)({},e),{},{pageProfile:{results:e.pageProfile.results.map((function(e){return N(e,t,a.id)}))},popularProfiles:Object(_.a)(Object(_.a)({},e.popularProfiles),{},{results:e.popularProfiles.results.map((function(e){return N(e,t,a.id)}))})})})),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(u.a)(Object(l.a)().mark((function e(t){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.delete("/followers/".concat(t.following_id,"/"));case 3:s((function(e){return Object(_.a)(Object(_.a)({},e),{},{pageProfile:{results:e.pageProfile.results.map((function(e){return y(e,t)}))},popularProfiles:Object(_.a)(Object(_.a)({},e.popularProfiles),{},{results:e.popularProfiles.results.map((function(e){return y(e,t)}))})})})),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){var e=function(){var e=Object(u.a)(Object(l.a)().mark((function e(){var t,n;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.get("/profiles/?ordering=-followers_count");case 3:t=e.sent,n=t.data,s((function(e){return Object(_.a)(Object(_.a)({},e),{},{popularProfiles:n})})),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[i]),Object(I.jsx)(Ie.Provider,{value:r,children:Object(I.jsx)(Re.Provider,{value:{setProfileData:s,handleFollow:o,handleUnfollow:j},children:t})})},Te=n(50),Ge=n.n(Te),Xe=function(e){var t=e.profile,n=e.mobile,a=e.imageSize,c=void 0===a?55:a,r=t.id,s=t.following_id,i=t.image,o=t.owner,l=L(),u=(null===l||void 0===l?void 0:l.username)===o,j=Le(),d=j.handleFollow,b=j.handleUnfollow;return Object(I.jsxs)("div",{className:"my-3 d-flex align-items-center ".concat(n&&"flex-column"),children:[Object(I.jsx)("div",{children:Object(I.jsx)(x.b,{className:"align-self-center",to:"/profiles/".concat(r),children:Object(I.jsx)(z,{src:i,height:c})})}),Object(I.jsx)("div",{className:"mx-2 ".concat(Ge.a.WordBreak),children:Object(I.jsx)("strong",{children:o})}),Object(I.jsx)("div",{className:"text-right ".concat(!n&&"ml-auto"),children:!n&&l&&!u&&(s?Object(I.jsx)(M.a,{className:"".concat(Ge.a.UnFollowBtn),onClick:function(){return b(t)},children:"unfollow"}):Object(I.jsx)(M.a,{className:"".concat(Ge.a.FollowBtn),onClick:function(){return d(t)},children:"follow"}))})]})},ze=function(e){var t=e.mobile,n=Ee().popularProfiles;return Object(I.jsx)(d.a,{className:"".concat(o.a.Content," ").concat(t&&"d-lg-none text-center mb-3"),children:n.results.length?Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("p",{className:"text-center font-weight-bold",children:"Popular profiles"}),t?Object(I.jsx)("div",{className:"d-flex justify-content-around",children:n.results.slice(0,4).map((function(e){return Object(I.jsx)(Xe,{profile:e,mobile:!0},e.id)}))}):n.results.map((function(e){return Object(I.jsx)(Xe,{profile:e},e.id)}))]}):Object(I.jsx)(oe,{spinner:!0})})};var Qe=function(){var e=Object(A.h)().id,t=Object(a.useState)({results:[]}),n=Object(h.a)(t,2),c=n[0],r=n[1],s=L(),i=null===s||void 0===s?void 0:s.profile_image,j=Object(a.useState)({results:[]}),b=Object(h.a)(j,2),p=b[0],O=b[1];return Object(a.useEffect)((function(){var t=function(){var t=Object(u.a)(Object(l.a)().mark((function t(){var n,a,c,s;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all([g.get("/reviews/".concat(e)),g.get("/comments/?review=".concat(e))]);case 3:n=t.sent,a=Object(h.a)(n,2),c=a[0].data,s=a[1].data,r({results:[c]}),O(s),t.next=13;break;case 11:t.prev=11,t.t0=t.catch(0);case 13:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}();t()}),[e]),Object(I.jsxs)(q.a,{className:"h-100",children:[Object(I.jsxs)(K.a,{className:"py-2 p-0 p-lg-2",lg:8,children:[Object(I.jsx)(ze,{mobile:!0}),Object(I.jsx)(we,Object(_.a)(Object(_.a)({},c.results[0]),{},{setReviews:r,reviewPage:!0})),Object(I.jsxs)(d.a,{className:"px-3 ".concat(o.a.Content),children:[Object(I.jsx)("h3",{className:"text-center mb-3 text-muted",children:"Comments"}),s?Object(I.jsx)(Se,{profile_id:s.profile_id,profileImage:i,review:e,setReview:r,setComments:O}):p.results.length?"Comments":null,p.results.length?Object(I.jsx)(Fe.a,{children:p.results.map((function(e){return Object(I.jsx)(Ne,Object(_.a)(Object(_.a)({},e),{},{setReview:r,setComments:O}),e.id)})),dataLength:p.results.length,loader:Object(I.jsx)(oe,{spinner:!0}),hasMore:!!p.next,next:function(){return B(p,O)}}):s?Object(I.jsx)("span",{children:"No comments yet, be the first to comment!"}):Object(I.jsx)("span",{children:"No comments... yet"})]})]}),Object(I.jsx)(K.a,{lg:4,className:"d-none d-lg-block p-0 p-lg-2",children:Object(I.jsx)(ze,{})})]})},He=n(82),Ue=n.n(He),We=n.p+"static/media/no-results.ebf47185.png";var Ye=function(e){var t=e.message,n=e.filter,c=void 0===n?"":n,r=L(),s=Object(a.useState)({results:[]}),i=Object(h.a)(s,2),j=i[0],b=i[1],p=Object(a.useState)(!1),O=Object(h.a)(p,2),v=O[0],x=O[1],m=Object(A.g)().pathname,f=Object(a.useState)(""),w=Object(h.a)(f,2),C=w[0],k=w[1];return Object(a.useEffect)((function(){var e=function(){var e=Object(u.a)(Object(l.a)().mark((function e(){var t,n;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.get("/reviews/?".concat(c,"search=").concat(C));case 3:t=e.sent,n=t.data,b(n),x(!0),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();x(!1);var t=setTimeout((function(){e()}),1e3);return function(){clearTimeout(t)}}),[c,C,m,r]),Object(I.jsxs)(q.a,{className:"h-100",children:[Object(I.jsxs)(K.a,{className:"py-2 p-0 p-lg-2",lg:8,children:[Object(I.jsx)(ze,{mobile:!0}),Object(I.jsx)("i",{className:"fas fa-search ".concat(Ue.a.SearchIcon)}),Object(I.jsx)(Z.a,{className:Ue.a.SearchBar,onSubmit:function(e){return e.preventDefault()},children:Object(I.jsx)(Z.a.Control,{value:C,onChange:function(e){return k(e.target.value)},type:"text",className:"mr-sm-2",placeholder:"Search reviews"})}),v?Object(I.jsx)(I.Fragment,{children:j.results.length?Object(I.jsx)(Fe.a,{children:j.results.map((function(e){return Object(I.jsx)(we,Object(_.a)(Object(_.a)({},e),{},{setReviews:b}),e.id)})),dataLength:j.results.length,loader:Object(I.jsx)(oe,{spinner:!0}),hasMore:!!j.next,next:function(){return B(j,b)}}):Object(I.jsx)(d.a,{className:o.a.Content,children:Object(I.jsx)(oe,{src:We,message:t})})}):Object(I.jsx)(d.a,{className:o.a.Content,children:Object(I.jsx)(oe,{spinner:!0})})]}),Object(I.jsx)(K.a,{md:4,className:"d-none d-lg-block p-0 p-lg-2",children:Object(I.jsx)(ze,{})})]})};var Je=function(){var e,t,n,c,r,s,i,j=Object(a.useState)({}),b=Object(h.a)(j,2),p=b[0],O=b[1],v=Object(a.useState)({book_title:"",book_author:"",caption:"",book_category:"",rating:"",review_body:"",image:""}),x=Object(h.a)(v,2),m=x[0],f=x[1],w=m.book_title,C=m.book_author,k=m.caption,B=m.book_category,N=m.rating,y=m.review_body,S=m.image,F=Object(a.useRef)(null),R=Object(A.f)(),E=Object(A.h)().id;Object(a.useEffect)((function(){var e=function(){var e=Object(u.a)(Object(l.a)().mark((function e(){var t,n,a,c,r,s,i,o,u;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.get("/reviews/".concat(E,"/"));case 3:t=e.sent,n=t.data,a=n.book_title,c=n.book_author,r=n.caption,s=n.book_category,i=n.rating,o=n.review_body,u=n.image,n.is_owner?f({book_title:a,book_author:c,caption:r,book_category:s,rating:i,review_body:o,image:u}):R.push("/"),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();e()}),[R,E]);var L=function(e){f(Object(_.a)(Object(_.a)({},m),{},Object(U.a)({},e.target.name,e.target.value)))},P=function(){var e=Object(u.a)(Object(l.a)().mark((function e(t){var n,a,c,r;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(a=new FormData).append("book_title",w),a.append("book_author",C),a.append("caption",k),a.append("book_category",B),a.append("rating",N),a.append("review_body",y),null!==F&&void 0!==F&&null!==(n=F.current)&&void 0!==n&&n.files[0]&&a.append("image",F.current.files[0]),e.prev=9,e.next=12,g.put("/reviews/".concat(E,"/"),a);case 12:R.push("/reviews/".concat(E)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(9),401!==(null===(c=e.t0.response)||void 0===c?void 0:c.status)&&O(null===(r=e.t0.response)||void 0===r?void 0:r.data);case 18:case"end":return e.stop()}}),e,null,[[9,15]])})));return function(t){return e.apply(this,arguments)}}(),T=Object(I.jsxs)("div",{className:"text-center",children:[Object(I.jsxs)(Z.a.Group,{children:[Object(I.jsx)(Z.a.Label,{children:"Book Title"}),Object(I.jsx)(Z.a.Control,{type:"text",name:"book_title",value:w,onChange:L})]}),null===p||void 0===p||null===(e=p.book_title)||void 0===e?void 0:e.map((function(e,t){return Object(I.jsx)(D.a,{variant:"warning",children:e},t)})),Object(I.jsxs)(Z.a.Group,{children:[Object(I.jsx)(Z.a.Label,{children:"Book Author"}),Object(I.jsx)(Z.a.Control,{type:"text",name:"book_author",value:C,onChange:L})]}),null===p||void 0===p||null===(t=p.book_author)||void 0===t?void 0:t.map((function(e,t){return Object(I.jsx)(D.a,{variant:"warning",children:e},t)})),Object(I.jsxs)(Z.a.Group,{children:[Object(I.jsx)(Z.a.Label,{children:"Caption"}),Object(I.jsx)(Z.a.Control,{as:"textarea",rows:2,name:"caption",value:k,onChange:L})]}),null===p||void 0===p||null===(n=p.caption)||void 0===n?void 0:n.map((function(e,t){return Object(I.jsx)(D.a,{variant:"warning",children:e},t)})),Object(I.jsxs)(Z.a.Group,{children:[Object(I.jsx)(Z.a.Label,{children:"Book Category"}),Object(I.jsxs)(Z.a.Control,{as:"select",name:"book_category",value:B,onChange:L,children:[Object(I.jsx)("option",{value:"nonfiction",children:"Non-Fiction"}),Object(I.jsx)("option",{value:"fiction",children:"Fiction"}),Object(I.jsx)("option",{value:"historicalfiction",children:"Historical Fiction"}),Object(I.jsx)("option",{value:"romancenovel",children:"Romance Novel"}),Object(I.jsx)("option",{value:"horror",children:"Horror"}),Object(I.jsx)("option",{value:"sciencefiction",children:"Science Fiction"}),Object(I.jsx)("option",{value:"biography",children:"Biography"}),Object(I.jsx)("option",{value:"memoir",children:"Memoir"}),Object(I.jsx)("option",{value:"fantasy",children:"Fantasy"}),Object(I.jsx)("option",{value:"thriller",children:"Thriller"}),Object(I.jsx)("option",{value:"childrensliterature",children:"Children's Literature"}),Object(I.jsx)("option",{value:"humor",children:"Humor"}),Object(I.jsx)("option",{value:"selfhelp",children:"Self-help"}),Object(I.jsx)("option",{value:"yougadultfiction",children:"Young Adult Fiction"}),Object(I.jsx)("option",{value:"picturebook",children:"Picture Book"}),Object(I.jsx)("option",{value:"other",children:"Other"})]})]}),null===p||void 0===p||null===(c=p.book_category)||void 0===c?void 0:c.map((function(e,t){return Object(I.jsx)(D.a,{variant:"warning",children:e},t)})),Object(I.jsxs)(Z.a.Group,{children:[Object(I.jsx)(Z.a.Label,{children:"Rating"}),Object(I.jsxs)(Z.a.Control,{as:"select",name:"rating",value:N,onChange:L,children:[Object(I.jsx)("option",{value:"1",children:"1"}),Object(I.jsx)("option",{value:"2",children:"2"}),Object(I.jsx)("option",{value:"3",children:"3"}),Object(I.jsx)("option",{value:"4",children:"4"}),Object(I.jsx)("option",{value:"5",children:"5"})]})]}),null===p||void 0===p||null===(r=p.rating)||void 0===r?void 0:r.map((function(e,t){return Object(I.jsx)(D.a,{variant:"warning",children:e},t)})),Object(I.jsxs)(Z.a.Group,{children:[Object(I.jsx)(Z.a.Label,{children:"review_body"}),Object(I.jsx)(Z.a.Control,{as:"textarea",rows:10,name:"review_body",value:y,onChange:L})]}),null===p||void 0===p||null===(s=p.review_body)||void 0===s?void 0:s.map((function(e,t){return Object(I.jsx)(D.a,{variant:"warning",children:e},t)})),Object(I.jsx)(M.a,{className:"".concat(V.a.Button," ").concat(V.a.Bright),onClick:function(){return R.goBack()},children:"cancel"}),Object(I.jsx)(M.a,{className:"".concat(V.a.Button," ").concat(V.a.Bright),type:"submit",children:"save"})]});return Object(I.jsx)(Z.a,{onSubmit:P,children:Object(I.jsxs)(q.a,{children:[Object(I.jsx)(K.a,{className:"py-2 p-0 p-md-2",md:7,lg:8,children:Object(I.jsxs)(d.a,{className:"".concat(o.a.Content," ").concat(ae.a.Container," d-flex flex-column justify-content-center"),children:[Object(I.jsxs)(Z.a.Group,{className:"text-center",children:[Object(I.jsx)("figure",{children:Object(I.jsx)(ce.a,{className:o.a.Image,src:S,rounded:!0})}),Object(I.jsx)("div",{children:Object(I.jsx)(Z.a.Label,{className:"".concat(V.a.Button," ").concat(V.a.Bright," btn"),htmlFor:"image-upload",children:"Change the image"})}),Object(I.jsx)(Z.a.File,{id:"image-upload",accept:"image/*",onChange:function(e){e.target.files.length&&(URL.revokeObjectURL(S),f(Object(_.a)(Object(_.a)({},m),{},{image:URL.createObjectURL(e.target.files[0])})))},ref:F})]}),null===p||void 0===p||null===(i=p.image)||void 0===i?void 0:i.map((function(e,t){return Object(I.jsx)(D.a,{variant:"warning",children:e},t)})),Object(I.jsx)("div",{className:"d-md-none",children:T})]})}),Object(I.jsx)(K.a,{md:5,lg:4,className:"d-none d-md-block p-0 p-md-2",children:Object(I.jsx)(d.a,{className:o.a.Content,children:T})})]})})},Ve=n(99),qe=n.n(Ve);var Ke=function(){var e=Object(a.useState)(!1),t=Object(h.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)({results:[]}),s=Object(h.a)(r,2),i=s[0],j=s[1],b=L(),p=Object(A.h)().id,O=Le(),v=O.setProfileData,x=O.handleFollow,m=O.handleUnfollow,f=Ee().pageProfile,w=Object(h.a)(f.results,1)[0],C=(null===b||void 0===b?void 0:b.username)===(null===w||void 0===w?void 0:w.owner);Object(a.useEffect)((function(){var e=function(){var e=Object(u.a)(Object(l.a)().mark((function e(){var t,n,a,r;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([g.get("/profiles/".concat(p,"/")),g.get("/reviews/?owner__profile=".concat(p))]);case 3:t=e.sent,n=Object(h.a)(t,2),a=n[0].data,r=n[1].data,v((function(e){return Object(_.a)(Object(_.a)({},e),{},{pageProfile:{results:[a]}})})),j(r),c(!0),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();e()}),[p,v]);var k=Object(I.jsxs)(I.Fragment,{children:[(null===w||void 0===w?void 0:w.is_owner)&&Object(I.jsx)(ge,{id:null===w||void 0===w?void 0:w.id}),Object(I.jsxs)(q.a,{noGutters:!0,className:"px-3 text-center",children:[Object(I.jsx)(K.a,{lg:3,className:"text-lg-left",children:Object(I.jsx)(ce.a,{className:qe.a.ProfileImage,roundedCircle:!0,src:null===w||void 0===w?void 0:w.image})}),Object(I.jsxs)(K.a,{lg:6,children:[Object(I.jsx)("h3",{className:"m-2",children:null===w||void 0===w?void 0:w.owner}),Object(I.jsxs)(q.a,{className:"justify-content-center no-gutters",children:[Object(I.jsxs)(K.a,{xs:3,className:"my-2",children:[Object(I.jsx)("div",{children:null===w||void 0===w?void 0:w.reviews_count}),Object(I.jsx)("div",{children:"reviews"})]}),Object(I.jsxs)(K.a,{xs:3,className:"my-2",children:[Object(I.jsx)("div",{children:null===w||void 0===w?void 0:w.followers_count}),Object(I.jsx)("div",{children:"followers"})]}),Object(I.jsxs)(K.a,{xs:3,className:"my-2",children:[Object(I.jsx)("div",{children:null===w||void 0===w?void 0:w.following_count}),Object(I.jsx)("div",{children:"following"})]})]})]}),Object(I.jsx)(K.a,{lg:3,className:"text-lg-right",children:b&&!C&&(null!==w&&void 0!==w&&w.following_id?Object(I.jsx)(M.a,{className:"".concat(Ge.a.UnFollowBtn," ").concat(V.a.BlackOutline),onClick:function(){return m(w)},children:"unfollow"}):Object(I.jsx)(M.a,{className:"".concat(Ge.a.FollowBtn," ").concat(V.a.Black),onClick:function(){return x(w)},children:"follow"}))}),(null===w||void 0===w?void 0:w.content)&&Object(I.jsx)(K.a,{className:"p-3",children:w.content})]})]}),N=Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("hr",{}),Object(I.jsxs)("p",{className:"text-center",children:[null===w||void 0===w?void 0:w.owner,"'s Reviews"]}),Object(I.jsx)("hr",{}),i.results.length?Object(I.jsx)(Fe.a,{children:i.results.map((function(e){return Object(I.jsx)(we,Object(_.a)(Object(_.a)({},e),{},{setReviews:j}),e.id)})),dataLength:i.results.length,loader:Object(I.jsx)(oe,{spinner:!0}),hasMore:!!i.next,next:function(){return B(i,j)}}):Object(I.jsx)(oe,{src:We,message:"No results found, ".concat(null===w||void 0===w?void 0:w.owner," hasn't reviewed yet.")})]});return Object(I.jsxs)(q.a,{children:[Object(I.jsxs)(K.a,{className:"py-2 p-0 p-lg-2",lg:8,children:[Object(I.jsx)(ze,{mobile:!0}),Object(I.jsx)(d.a,{className:o.a.Content,children:n?Object(I.jsxs)(I.Fragment,{children:[k,N]}):Object(I.jsx)(oe,{spinner:!0})})]}),Object(I.jsx)(K.a,{lg:4,className:"d-none d-lg-block p-0 p-lg-2",children:Object(I.jsx)(ze,{})})]})},Ze=function(){var e,t=Object(a.useState)(""),n=Object(h.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)({}),i=Object(h.a)(s,2),j=i[0],b=i[1],p=Object(A.f)(),O=Object(A.h)().id,v=L(),x=P();Object(a.useEffect)((function(){var e;(null===v||void 0===v||null===(e=v.profile_id)||void 0===e?void 0:e.toString())===O?r(v.username):p.push("/")}),[v,p,O]);var m=function(){var e=Object(u.a)(Object(l.a)().mark((function e(t){var n;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,w.put("/dj-rest-auth/user/",{username:c});case 4:x((function(e){return Object(_.a)(Object(_.a)({},e),{},{username:c})})),p.goBack(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),b(null===(n=e.t0.response)||void 0===n?void 0:n.data);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(I.jsx)(q.a,{children:Object(I.jsx)(K.a,{className:"py-2 mx-auto text-center",md:6,children:Object(I.jsx)(d.a,{className:o.a.Content,children:Object(I.jsxs)(Z.a,{onSubmit:m,className:"my-2",children:[Object(I.jsxs)(Z.a.Group,{children:[Object(I.jsx)(Z.a.Label,{children:"Change username"}),Object(I.jsx)(Z.a.Control,{placeholder:"username",type:"text",value:c,onChange:function(e){return r(e.target.value)}})]}),null===j||void 0===j||null===(e=j.username)||void 0===e?void 0:e.map((function(e,t){return Object(I.jsx)(D.a,{variant:"warning",children:e},t)})),Object(I.jsx)(M.a,{className:"".concat(V.a.Button," ").concat(V.a.Bright),onClick:function(){return p.goBack()},children:"cancel"}),Object(I.jsx)(M.a,{className:"".concat(V.a.Button," ").concat(V.a.Bright),type:"submit",children:"save"})]})})})})},De=function(){var e,t,n=Object(A.f)(),c=Object(A.h)().id,r=L(),s=Object(a.useState)({new_password1:"",new_password2:""}),i=Object(h.a)(s,2),j=i[0],b=i[1],p=j.new_password1,O=j.new_password2,v=Object(a.useState)({}),x=Object(h.a)(v,2),m=x[0],f=x[1],g=function(e){b(Object(_.a)(Object(_.a)({},j),{},Object(U.a)({},e.target.name,e.target.value)))};Object(a.useEffect)((function(){var e;(null===r||void 0===r||null===(e=r.profile_id)||void 0===e?void 0:e.toString())!==c&&n.push("/")}),[r,n,c]);var C=function(){var e=Object(u.a)(Object(l.a)().mark((function e(t){var a;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,w.post("/dj-rest-auth/password/change/",j);case 4:n.goBack(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),f(null===(a=e.t0.response)||void 0===a?void 0:a.data);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(I.jsx)(q.a,{children:Object(I.jsx)(K.a,{className:"py-2 mx-auto text-center",md:6,children:Object(I.jsx)(d.a,{className:o.a.Content,children:Object(I.jsxs)(Z.a,{onSubmit:C,children:[Object(I.jsxs)(Z.a.Group,{children:[Object(I.jsx)(Z.a.Label,{children:"New password"}),Object(I.jsx)(Z.a.Control,{placeholder:"new password",type:"password",value:p,onChange:g,name:"new_password1"})]}),null===m||void 0===m||null===(e=m.new_password1)||void 0===e?void 0:e.map((function(e,t){return Object(I.jsx)(D.a,{variant:"warning",children:e},t)})),Object(I.jsxs)(Z.a.Group,{children:[Object(I.jsx)(Z.a.Label,{children:"Confirm password"}),Object(I.jsx)(Z.a.Control,{placeholder:"confirm new password",type:"password",value:O,onChange:g,name:"new_password2"})]}),null===m||void 0===m||null===(t=m.new_password2)||void 0===t?void 0:t.map((function(e,t){return Object(I.jsx)(D.a,{variant:"warning",children:e},t)})),Object(I.jsx)(M.a,{className:"".concat(V.a.Button," ").concat(V.a.Bright),onClick:function(){return n.goBack()},children:"cancel"}),Object(I.jsx)(M.a,{type:"submit",className:"".concat(V.a.Button," ").concat(V.a.Bright),children:"save"})]})})})})},Me=function(){var e,t,n=L(),c=P(),r=Object(A.h)().id,s=Object(A.f)(),i=Object(a.useRef)(),j=Object(a.useState)({name:"",content:"",image:""}),b=Object(h.a)(j,2),p=b[0],O=b[1],v=p.name,x=p.content,m=p.image,f=Object(a.useState)({}),w=Object(h.a)(f,2),C=w[0],k=w[1];Object(a.useEffect)((function(){var e=function(){var e=Object(u.a)(Object(l.a)().mark((function e(){var t,a,c,i,o,u;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===n||void 0===n||null===(t=n.profile_id)||void 0===t?void 0:t.toString())!==r){e.next=15;break}return e.prev=1,e.next=4,g.get("/profiles/".concat(r,"/"));case 4:a=e.sent,c=a.data,i=c.name,o=c.content,u=c.image,O({name:i,content:o,image:u}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),s.push("/");case 13:e.next=16;break;case 15:s.push("/");case 16:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();e()}),[n,s,r]);var B=function(){var e=Object(u.a)(Object(l.a)().mark((function e(t){var n,a,o,u,j,d;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(a=new FormData).append("name",v),a.append("content",x),null!==i&&void 0!==i&&null!==(n=i.current)&&void 0!==n&&n.files[0]&&a.append("image",null===i||void 0===i||null===(o=i.current)||void 0===o?void 0:o.files[0]),e.prev=5,e.next=8,g.put("/profiles/".concat(r,"/"),a);case 8:u=e.sent,j=u.data,c((function(e){return Object(_.a)(Object(_.a)({},e),{},{profile_image:j.image})})),s.goBack(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(5),k(null===(d=e.t0.response)||void 0===d?void 0:d.data);case 17:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(t){return e.apply(this,arguments)}}(),N=Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)(Z.a.Group,{children:[Object(I.jsx)(Z.a.Label,{children:"Bio"}),Object(I.jsx)(Z.a.Control,{as:"textarea",value:x,onChange:function(e){O(Object(_.a)(Object(_.a)({},p),{},Object(U.a)({},e.target.name,e.target.value)))},name:"content",rows:7})]}),null===C||void 0===C||null===(e=C.content)||void 0===e?void 0:e.map((function(e,t){return Object(I.jsx)(D.a,{variant:"warning",children:e},t)})),Object(I.jsx)(M.a,{className:"".concat(V.a.Button," ").concat(V.a.Bright),onClick:function(){return s.goBack()},children:"cancel"}),Object(I.jsx)(M.a,{className:"".concat(V.a.Button," ").concat(V.a.Bright),type:"submit",children:"save"})]});return Object(I.jsx)(Z.a,{onSubmit:B,children:Object(I.jsxs)(q.a,{children:[Object(I.jsx)(K.a,{className:"py-2 p-0 p-md-2 text-center",md:7,lg:6,children:Object(I.jsxs)(d.a,{className:o.a.Content,children:[Object(I.jsxs)(Z.a.Group,{children:[m&&Object(I.jsx)("figure",{children:Object(I.jsx)(ce.a,{src:m,fluid:!0})}),null===C||void 0===C||null===(t=C.image)||void 0===t?void 0:t.map((function(e,t){return Object(I.jsx)(D.a,{variant:"warning",children:e},t)})),Object(I.jsx)("div",{children:Object(I.jsx)(Z.a.Label,{className:"".concat(V.a.Button," ").concat(V.a.Bright," btn my-auto"),htmlFor:"image-upload",children:"Change the image"})}),Object(I.jsx)(Z.a.File,{id:"image-upload",ref:i,accept:"image/*",onChange:function(e){e.target.files.length&&O(Object(_.a)(Object(_.a)({},p),{},{image:URL.createObjectURL(e.target.files[0])}))}})]}),Object(I.jsx)("div",{className:"d-md-none",children:N})]})}),Object(I.jsx)(K.a,{md:5,lg:6,className:"d-none d-md-block p-0 p-md-2 text-center",children:Object(I.jsx)(d.a,{className:o.a.Content,children:N})})]})})};var $e=function(){var e=L(),t=(null===e||void 0===e?void 0:e.profile_id)||"";return Object(I.jsxs)("div",{className:o.a.App,children:[Object(I.jsx)(H,{}),Object(I.jsx)(d.a,{className:o.a.Main,children:Object(I.jsxs)(A.c,{children:[Object(I.jsx)(A.a,{exact:!0,path:"/",render:function(){return Object(I.jsx)(Ye,{message:"No results found. Adjust the search keyword."})}}),Object(I.jsx)(A.a,{exact:!0,path:"/feed",render:function(){return Object(I.jsx)(Ye,{message:"No results found. Adjust the search keyword or follow a user.",filter:"owner__followed__owner__profile=".concat(t,"&")})}}),Object(I.jsx)(A.a,{exact:!0,path:"/liked",render:function(){return Object(I.jsx)(Ye,{message:"No results found. Adjust the search keyword or like a review.",filter:"likes__owner__profile=".concat(t,"&ordering=-likes__created_at&")})}}),Object(I.jsx)(A.a,{exact:!0,path:"/signin",render:function(){return Object(I.jsx)(te,{})}}),Object(I.jsx)(A.a,{exact:!0,path:"/signup",render:function(){return Object(I.jsx)(ee,{})}}),Object(I.jsx)(A.a,{exact:!0,path:"/reviews/create",render:function(){return Object(I.jsx)(le,{})}}),Object(I.jsx)(A.a,{exact:!0,path:"/reviews/:id",render:function(){return Object(I.jsx)(Qe,{})}}),Object(I.jsx)(A.a,{exact:!0,path:"/reviews/:id/edit",render:function(){return Object(I.jsx)(Je,{})}}),Object(I.jsx)(A.a,{exact:!0,path:"/profiles/:id",render:function(){return Object(I.jsx)(Ke,{})}}),Object(I.jsx)(A.a,{exact:!0,path:"/profiles/:id/edit/username",render:function(){return Object(I.jsx)(Ze,{})}}),Object(I.jsx)(A.a,{exact:!0,path:"/profiles/:id/edit/password",render:function(){return Object(I.jsx)(De,{})}}),Object(I.jsx)(A.a,{exact:!0,path:"/profiles/:id/edit",render:function(){return Object(I.jsx)(Me,{})}}),Object(I.jsx)(A.a,{component:function(){return Object(I.jsx)("p",{children:"Page not found!"})}})]})})]})},et=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,146)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(I.jsx)(x.a,{children:Object(I.jsx)(T,{children:Object(I.jsx)(Pe,{children:Object(I.jsx)($e,{})})})}),document.getElementById("root")),et()},15:function(e,t,n){e.exports={App:"App_App__16ZpL",BodyFont:"App_BodyFont__1U91j",Main:"App_Main__HQkvd",Content:"App_Content__ZaMNr",FillerImage:"App_FillerImage__2ob-g",Image:"App_Image__3UPXw"}},25:function(e,t,n){e.exports={Review:"Review_Review___6jf0",ReviewRow:"Review_ReviewRow__2FFnM",ReviewTitle:"Review_ReviewTitle__ZCAJb",ImageSmallScreen:"Review_ImageSmallScreen__3YVDQ",ReviewCaption:"Review_ReviewCaption__XdrK3",Heart:"Review_Heart__mZMGo",HeartOutline:"Review_HeartOutline__WMjfZ",Star:"Review_Star__2zsy0",ReviewBody:"Review_ReviewBody__2Fz6O",ReviewBar:"Review_ReviewBar__3oFXt",ReviewBackground:"Review_ReviewBackground__PYDMd",ReviewSummary:"Review_ReviewSummary__2oqaV",HideOnSmallScreen:"Review_HideOnSmallScreen__1sfw9",HideOnLargeScreen:"Review_HideOnLargeScreen__IT112"}},27:function(e,t,n){e.exports={NavBar:"NavBar_NavBar__1amC6",NavLink:"NavBar_NavLink__34ons",Active:"NavBar_Active__3PBZb"}},28:function(e,t,n){e.exports={Row:"SignUpInForm_Row__2AH7P",Background:"SignUpInForm_Background__2YmkE",Input:"SignUpInForm_Input__22mN5",Header:"SignUpInForm_Header__20uOs",Link:"SignUpInForm_Link__3jl6K",Container:"SignUpInForm_Container__2vqrr"}},49:function(e,t,n){e.exports={Form:"CommentCreateEditForm_Form__1Qeyz",Button:"CommentCreateEditForm_Button__sGFSX"}},50:function(e,t,n){e.exports={WordBreak:"Profile_WordBreak__3_YmI",UnFollowBtn:"Profile_UnFollowBtn__YwYRv",FollowBtn:"Profile_FollowBtn__2U_s9"}},65:function(e,t,n){e.exports={Container:"ReviewCreateEditForm_Container__2L1zP"}},74:function(e,t,n){e.exports={DropdownItem:"MoreDropdown_DropdownItem__2E4UM",Absolute:"MoreDropdown_Absolute__2RO70"}},81:function(e,t,n){e.exports={Owner:"Comment_Owner__3sgYe",Date:"Comment_Date__10qt0"}},82:function(e,t,n){e.exports={SearchBar:"ReviewsPage_SearchBar__3IbZj",SearchIcon:"ReviewsPage_SearchIcon__3zgJS"}},95:function(e,t,n){e.exports={Avatar:"Avatar_Avatar__196lW"}},97:function(e,t,n){e.exports={Asset:"Asset_Asset__1dBcX"}},99:function(e,t,n){e.exports={ProfileImage:"ProfilePage_ProfileImage__7dvRw"}}},[[134,1,2]]]);
//# sourceMappingURL=main.358a7e45.chunk.js.map